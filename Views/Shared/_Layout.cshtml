<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - POET</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/POETWeb.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />

    @await RenderSectionAsync("Styles", required: false)
</head>

<body class="@(ViewData["BodyClass"])">

    <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
        <!-- BOOK -->
        <symbol id="ico-book" viewBox="0 0 24 24">
            <path d="M4 3h9a3 3 0 0 1 3 3v14H7a3 3 0 0 0-3 3V6a3 3 0 0 1 3-3z" fill="none" />
            <path d="M16 20H7a3 3 0 0 0-3 3" fill="none" />
            <path d="M13 3v7l-2-1-2 1V3" fill="none" />
        </symbol>

        <!-- USERS -->
        <symbol id="ico-users" viewBox="0 0 24 24">
            <circle cx="8" cy="8" r="3" fill="none" />
            <path d="M2 20v-1a5 5 0 0 1 5-5h2a5 5 0 0 1 5 5v1" fill="none" />
            <circle cx="17" cy="8" r="2.5" fill="none" />
            <path d="M17 13a5 5 0 0 1 5 5v2" fill="none" />
        </symbol>

        <!-- BAR CHART -->
        <symbol id="ico-bars" viewBox="0 0 24 24">
            <path d="M3 21h18" fill="none" />
            <rect x="5" y="10" width="3" height="8" rx="1" ry="1" fill="none" />
            <rect x="10.5" y="6" width="3" height="12" rx="1" ry="1" fill="none" />
            <rect x="16" y="12" width="3" height="6" rx="1" ry="1" fill="none" />
        </symbol>

        <!-- PLAY -->
        <symbol id="ico-play" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="9" fill="none" />
            <path d="M10 9l6 3-6 3V9z" fill="none" />
        </symbol>

        <!-- ZAP -->
        <symbol id="ico-zap" viewBox="0 0 24 24">
            <path d="M13 2L3 14h7l-1 8 10-12h-7l1-8z" fill="none" />
        </symbol>

        <!-- CHECK CIRCLE -->
        <symbol id="ico-check" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="9" fill="none" />
            <path d="M8 12l3 3 5-6" fill="none" />
        </symbol>
    </svg>

    <div class="container-fluid p-0">
        <main role="main">
            @RenderBody()
        </main>
    </div>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
<script>
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('.user-menu').forEach(menu => {
        const trigger = menu.querySelector('.user-trigger');
        const panel   = menu.querySelector('.user-panel');
        let hideT;

        const setOpen = (v) => {
          menu.classList.toggle('is-open', v);
          if (trigger) trigger.setAttribute('aria-expanded', v ? 'true' : 'false');
        };

        const open  = () => { clearTimeout(hideT); setOpen(true); };
        const close = () => { hideT = setTimeout(() => setOpen(false), 160); };

        // mở khi vào trigger hoặc panel
        trigger?.addEventListener('mouseenter', open);
        panel?.addEventListener('mouseenter', open);

        // đóng khi rời cả trigger và panel (có độ trễ)
        trigger?.addEventListener('mouseleave', close);
        panel?.addEventListener('mouseleave', close);

        // cũng mở khi focus vào trigger (bàn phím)
        trigger?.addEventListener('focus', open);
        trigger?.addEventListener('blur', close);
      });
    });
</script>
